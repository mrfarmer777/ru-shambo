<h2>Welcome, <%=@user.name%></h2>


<%= link_to "Log Out", logout_path%>
<%= link_to "Create New Game", new_game_path%>

<h3>Challenge a New Opponent</h3>
<% if @match.errors.any? %>
<div class="error_explanation">
    <p><%=pluralize(@match.errors.count, "error")%> prohibited this match from being created: </p>
    <ul>
        <% @match.errors.full_messages.each do |msg|%>
            <li><%=msg%></li>
        <%end%>
    </ul>
</div>
<%end%>
<%=form_for @match, url: user_matches_path(@user) do |f|%>
    <%=collection_select :match, :opponent_id, User.all.select {|u|  u.id!=@user.id }, "id", "name", prompt:true%>
    <%=f.submit "Challenge Opponent!"%>
<%end%>

<h3>My Matches: </h3>
<%= render partial: "users/user_matches", locals:{matches: @user.matches}%>
<%=link_to "View My Matches", user_matches_path(@user)%>

<h3>My Stats:</h3>
<%if @user.games.count>0%>
    <p><b>Record (All-time): </b><%=@user.record%></p>
    <p><b>Win Percentage: </b><%=@user.win_percentage%></p>
    <p><b>Favorite Opponent: </b><%=@user.favorite_opponent%></p>
    <p><b>Overall Rank: </b><%=@user.points_rank%></p>
    <p><b>Favorite Throw: </b><%=@user.favorite_throw%></p>
<%else%>
    <p>No games played yet!</p>
<%end%>


