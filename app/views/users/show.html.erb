<div class="row">
    <div class="med-grey panel">
        <h2><%=@user.name%></h2>
        <p>Ru-Rank: <%=@user.points_rank%> | Throw Master</p>
        <div class="circle-group row">
            <div>
                <a href="<%=logout_path%>" class="btn btn-danger circle">L</a>
                <p class="circle-helper">Logout</p>
            </div>
            <div>
                <a class="btn btn-primary circle"  data-toggle="collapse" href="#user_new_match_form">M</a>
                <p class="circle-helper">New Match</p>
            </div>
            <div>
                <a href="<%=new_game_path%>" class="btn btn-primary circle">N</a>
                <p class="circle-helper">New Game</p>
            </div>
        </div>
    </div> 
</div>
<% if @user.games.count>0%>
    <div class="row">
        <div class="col-md-12 med-grey panel panel-left">
            <h3>Active Games: </h3>
            <%= render partial: "games/games_table", locals:{games: @user.active_games}%>
        </div>
    </div>
<%end%>

<div class="row">
    <div class="col-md-12 med-grey panel panel-left">
        <div class="row">
            <div class="col-xs-4">
                <h3>My Matches:<a class="btn btn-primary circle-sm" style="padding-top:0px" data-toggle="collapse" href="#user_new_match_form">+</a> </h3>
            </div>
        </div>
        
        <div class="collapse" id="user_new_match_form">
            <% if @match.errors.any? %>
                <div class="error_explanation">
                    <p><%=pluralize(@match.errors.count, "error")%> prohibited this match from being created: </p>
                    <ul>
                        <% @match.errors.full_messages.each do |msg|%>
                            <li class="error-text"><%=msg%></li>
                        <%end%>
                    </ul>
                </div>
            <%end%>
            <%=form_for @match, url: user_matches_path(@user), class:"form-inline" do |f|%>
                <div class="form-row">
                    <div class="col-sm-4 col-xs-6">
                        <%=collection_select :match, :opponent_id, User.all.select {|u|  u.id!=@user.id }, "id", "name", {:include_blank => "Select a New Opponent"},{class: "form-control form-control-sm col-xs-2"}%>
                    </div>
                    <div class="col">
                        <%=f.submit "C", class:"btn btn-success circle-sm"%>
                        <p class="circle-helper">Challenge This Opponent</p>
                    </div>
                </div>
            <%end%>
        </div>
            
            
            
        <%= render partial: "users/user_matches", locals:{matches: @user.matches}%>
        
    </div>
</div>

<div class="row">
    <div class="col-md-12 med-grey panel panel-left">
        <h3>My Stats:</h3>
        <div>
            <%if @user.games.count>0%>
                <p><b>Record (All-time): </b><%=@user.record%></p>
                <p><b>Win Percentage: </b><%=@user.win_percentage%></p>
                <p><b>Favorite Opponent: </b><%=@user.favorite_opponent%></p>
                <p><b>Overall Rank: </b><%=@user.points_rank%></p>
                <p><b>Favorite Throw: </b><%=@user.favorite_throw%></p>
            <%else%>
                <p>No games played yet!</p>
            <%end%>
        </div>
        
    </div>
</div>
<%= javascript_include_tag "application"%>





